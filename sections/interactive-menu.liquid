{
  "name": "SNS - Pop Menu",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Menu Title",
      "default": "Our Menu"
    }
    {
      "type": "range",
      "id": "max_width",
      "min": 400,
      "max": 1200,
      "step": 50,
      "unit": "px",
      "label": "Menu Max Width",
      "default": 800
    },
    {
      "type": "range",
      "id": "item_font_size",
      "min": 1,
      "max": 3,
      "step": 0.1,
      "unit": "rem",
      "label": "Item Font Size",
      "default": 1.5
    }
  ],
  "blocks": [
    {
      "type": "category",
      "name": "Category",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Category Name",
          "default": "Mezze"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Items",
          "default": "<p>Hummus, Baba Ghanoush, Falafel</p>"
        },
        {
          "type": "color",
          "id": "color",
          "label": "Category Color",
          "default": "#FFC72C"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Pop Menu",
      "blocks": [
        {
          "type": "category",
          "settings": {
            "heading": "Mezze & Bites",
            "content": "<p><strong>Hummus Trio</strong> - Classic, Spicy, Beetroot<br><strong>Falafel Pop</strong> - Crunchy bites with tahini dip</p>",
            "color": "#FFC72C"
          }
        },
        {
          "type": "category",
          "settings": {
            "heading": "Sweet Treats",
            "content": "<p><strong>Knafeh Cup</strong> - Cheesy goodness<br><strong>Baklava Cheesecake</strong> - The best of both worlds</p>",
            "color": "#E63E6D"
          }
        }
      ]
    }
  ]
}
{% endschema %}

<div class="pop-menu section-content-wrapper page-width">
  <h2 class="font-heading text-center text-pop-outline" style="font-size: 3rem; margin-bottom: 2rem; color: var(--color-brand-black);">
    {{ section.settings.title }}
  </h2>

  <div class="pop-menu__accordion">
    {% for block in section.blocks %}
      <details class="pop-menu__item box-pop" style="--item-color: {{ block.settings.color }};">
        <summary class="pop-menu__summary font-heading">
          <span class="pop-menu__title">{{ block.settings.heading }}</span>
          <span class="pop-menu__icon">+</span>
        </summary>
        <div class="pop-menu__content font-body">
          {{ block.settings.content }}
        </div>
      </details>
    {% endfor %}
  </div>
</div>

<style>
  .pop-menu__accordion {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    max-width: {{ section.settings.max_width }}px;
    margin: 0 auto;
  }

  .pop-menu__item {
    background-color: var(--item-color);
    padding: 0;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .pop-menu__item[open] {
    box-shadow: calc(var(--pop-shadow-offset) * 2) calc(var(--pop-shadow-offset) * 2) 0 var(--color-brand-black);
    transform: translate(-4px, -4px);
  }

  .pop-menu__summary {
    padding: 1.5rem 2rem;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    list-style: none; /* Hide default triangle */
    font-size: {{ section.settings.item_font_size }}rem;
    text-transform: uppercase;
    color: var(--color-brand-black);
  }
  
  .pop-menu__summary::-webkit-details-marker {
    display: none;
  }

  .pop-menu__icon {
    font-weight: 800;
    font-size: 2rem;
    transition: transform 0.3s ease;
  }

  .pop-menu__item[open] .pop-menu__icon {
    transform: rotate(45deg);
  }

  .pop-menu__content {
    padding: 0 2rem 2rem;
    background-color: rgba(255,255,255,0.2);
    border-top: 3px solid var(--color-brand-black);
    font-size: 1.2rem;
    line-height: 1.6;
  }
  
  .pop-menu__content strong {
    font-weight: 800;
    text-decoration: underline wavy var(--color-brand-black);
  }
</style>
