{% schema %}
{
  "name": "SNS - Hero Splash",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Comic Burst Background"
    },
    {
      "type": "color",
      "id": "burst_color_left",
      "label": "Left Burst Color",
      "default": "#E63E6D"
    },
    {
      "type": "color",
      "id": "burst_color_right",
      "label": "Right Burst Color",
      "default": "#FFC72C"
    },
    {
      "type": "checkbox",
      "id": "scatter_icons",
      "label": "Show Floating Decor (Stars/Bolts)",
      "default": true
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "desktop_height",
      "label": "Desktop Height",
      "options": [
        { "value": "500px", "label": "Small" },
        { "value": "650px", "label": "Medium" },
        { "value": "800px", "label": "Large" },
        { "value": "100vh", "label": "Full Screen" }
      ],
      "default": "100vh"
    },
    {
      "type": "select",
      "id": "mobile_height",
      "label": "Mobile Height",
      "options": [
        { "value": "400px", "label": "Small" },
        { "value": "550px", "label": "Medium" },
        { "value": "700px", "label": "Large" },
        { "value": "90vh", "label": "Full Screen" }
      ],
      "default": "90vh"
    },
    {
      "type": "image_picker",
      "id": "center_image",
      "label": "Optional Center Image (PNG)"
    },
    {
      "type": "range",
      "id": "image_size",
      "min": 20,
      "max": 120,
      "step": 5,
      "unit": "%",
      "label": "Center Image Size",
      "default": 100
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "Comic Heading",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "SUGAR"
        },
        {
          "type": "font_picker",
          "id": "font",
          "label": "Font",
          "default": "helvetica_n9"
        },
        {
          "type": "range",
          "id": "size_desktop",
          "min": 5,
          "max": 30,
          "step": 1,
          "unit": "vw",
          "label": "Size (Desktop)",
          "default": 15
        },
        {
          "type": "range",
          "id": "size_mobile",
          "min": 10,
          "max": 50,
          "step": 1,
          "unit": "vw",
          "label": "Size (Mobile)",
          "default": 25
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text Color",
          "default": "#FFFFFF"
        },
        {
          "type": "color",
          "id": "shadow_color",
          "label": "Shadow Color",
          "default": "#121212"
        },
        {
          "type": "range",
          "id": "rotation",
          "min": -20,
          "max": 20,
          "step": 1,
          "unit": "deg",
          "label": "Rotation",
          "default": -5
        }
      ]
    },
    {
      "type": "tagline",
      "name": "Comic Tagline",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "AND ALL THINGS NICE"
        },
        {
          "type": "font_picker",
          "id": "font",
          "label": "Font",
          "default": "helvetica_n4"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text Color",
          "default": "#FFFFFF"
        },
        {
          "type": "color",
          "id": "stroke_color",
          "label": "Stroke/Shadow Color",
          "default": "#121212"
        },
        {
          "type": "range",
          "id": "size_desktop",
          "min": 1,
          "max": 5,
          "step": 0.1,
          "unit": "rem",
          "label": "Size (Desktop)",
          "default": 2.5
        },
        {
          "type": "range",
          "id": "size_mobile",
          "min": 1,
          "max": 5,
          "step": 0.1,
          "unit": "rem",
          "label": "Size (Mobile)",
          "default": 1.5
        }
      ]
    },
    {
      "type": "button",
      "name": "Comic Button",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Button Label",
          "default": "ORDER NOW"
        },
        {
          "type": "font_picker",
          "id": "font",
          "label": "Font",
          "default": "helvetica_n7"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Button Link"
        },
        {
          "type": "color",
          "id": "bg_color",
          "label": "Background Color",
          "default": "#FFFFFF"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text Color",
          "default": "#121212"
        }
      ]
    },
    {
      "type": "comic_image",
      "name": "Sticker / Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image (Transparent PNG)"
        },
        {
          "type": "range",
          "id": "width_desktop",
          "min": 50,
          "max": 800,
          "step": 10,
          "unit": "px",
          "label": "Width (Desktop)",
          "default": 200
        },
        {
          "type": "range",
          "id": "width_mobile",
          "min": 50,
          "max": 400,
          "step": 10,
          "unit": "px",
          "label": "Width (Mobile)",
          "default": 150
        },
        {
          "type": "range",
          "id": "rotation",
          "min": -180,
          "max": 180,
          "step": 5,
          "unit": "deg",
          "label": "Rotation",
          "default": 0
        },
        {
          "type": "checkbox",
          "id": "drop_shadow",
          "label": "Add Pop Shadow",
          "default": true
        }
      ]
    },
    {
      "type": "spacer",
      "name": "Spacer",
      "settings": [
        {
          "type": "range",
          "id": "height",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Height",
          "default": 20
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "SNS - Hero Splash",
      "blocks": [
        { "type": "heading", "settings": { "text": "SUGAR", "rotation": -5 } },
        { "type": "tagline", "settings": { "text": "AND ALL THINGS NICE" } },
        { "type": "heading", "settings": { "text": "SPICE", "rotation": 5, "text_color": "#FFC72C" } },
        { "type": "button" }
      ]
    }
  ]
}
{% endschema %}

<div class="hero-comic-burst" 
     style="--burst-left: {{ section.settings.burst_color_left }}; --burst-right: {{ section.settings.burst_color_right }}; 
            --desktop-height: {{ section.settings.desktop_height }}; --mobile-height: {{ section.settings.mobile_height }};">
  
  <!-- Halftone Pattern Overlay -->
  <div class="hero-comic__pattern"></div>

  <!-- Background Split -->
  <div class="hero-comic__bg-left"></div>
  <div class="hero-comic__bg-right"></div>

  <!-- Content Container -->
  <div class="hero-comic__content-wrapper">
    <div class="hero-comic__blocks">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'heading' -%}
            {% style %}
              {{ block.settings.font | font_face: font_display: 'swap' }}
            {% endstyle %}
            <div class="hero-comic__block-item" {{ block.shopify_attributes }}>
              <h2 class="comic-3d-text" 
                  style="
                    font-family: {{ block.settings.font.family }}, {{ block.settings.font.fallback_families }};
                    font-weight: {{ block.settings.font.weight }};
                    font-style: {{ block.settings.font.style }};
                    --text-color: {{ block.settings.text_color }}; --shadow-color: {{ block.settings.shadow_color }}; 
                    --font-size-desktop: {{ block.settings.size_desktop }}vw; 
                    --font-size-mobile: {{ block.settings.size_mobile }}vw;
                    --rotation: {{ block.settings.rotation }}deg;">
                {{ block.settings.text }}
              </h2>
            </div>

          {%- when 'tagline' -%}
            {% style %}
              {{ block.settings.font | font_face: font_display: 'swap' }}
            {% endstyle %}
            <div class="hero-comic__block-item" {{ block.shopify_attributes }}>
              <p class="comic-stroke-text" 
                 style="
                    font-family: {{ block.settings.font.family }}, {{ block.settings.font.fallback_families }};
                    font-weight: {{ block.settings.font.weight }};
                    font-style: {{ block.settings.font.style }};
                    --text-color: {{ block.settings.text_color }}; --stroke-color: {{ block.settings.stroke_color }};
                    --font-size-desktop: {{ block.settings.size_desktop }}rem;
                    --font-size-mobile: {{ block.settings.size_mobile }}rem;">
                {{ block.settings.text }}
              </p>
            </div>

          {%- when 'button' -%}
            {% style %}
              {{ block.settings.font | font_face: font_display: 'swap' }}
            {% endstyle %}
            <div class="hero-comic__block-item" {{ block.shopify_attributes }}>
              {% if block.settings.link %}
                <a href="{{ block.settings.link }}" class="hero-comic__button box-pop" 
                   style="
                      font-family: {{ block.settings.font.family }}, {{ block.settings.font.fallback_families }};
                      font-weight: {{ block.settings.font.weight }};
                      background: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }};">
                  {{ block.settings.label }}
                </a>
              {% else %}
                 <span class="hero-comic__button box-pop" 
                   style="
                      font-family: {{ block.settings.font.family }}, {{ block.settings.font.fallback_families }};
                      font-weight: {{ block.settings.font.weight }};
                      background: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }};">
                  {{ block.settings.label }}
                </span>
              {% endif %}
            </div>

          {%- when 'comic_image' -%}
             <div class="hero-comic__block-item" {{ block.shopify_attributes }}>
                {% if block.settings.image %}
                  <img src="{{ block.settings.image | image_url: width: 1000 }}" 
                       alt="Sticker"
                       class="hero-comic__sticker {% if block.settings.drop_shadow %}box-pop{% endif %}"
                       style="
                          --sticker-width-desktop: {{ block.settings.width_desktop }}px;
                          --sticker-width-mobile: {{ block.settings.width_mobile }}px;
                          transform: rotate({{ block.settings.rotation }}deg);
                       "
                       loading="lazy">
                {% else %}
                   <div style="background: #fff; border: 2px dashed #000; padding: 1rem; transform: rotate({{ block.settings.rotation }}deg);">
                     <p style="margin:0; font-family: monospace;">[Add Image]</p>
                   </div>
                {% endif %}
             </div>

          {%- when 'spacer' -%}
            <div class="hero-comic__spacer" style="height: {{ block.settings.height }}px;" {{ block.shopify_attributes }}></div>
        {%- endcase -%}
      {%- endfor -%}
    </div>

    <!-- Optional Center Image Overlay -->
    {% if section.settings.center_image %}
      <div class="hero-comic__image-overlay" style="width: {{ section.settings.image_size }}%;">
        <img
          src="{{ section.settings.center_image | image_url: width: 1200 }}"
          alt="Hero Decoration"
          class="hero-comic__image"
          width="1000"
          height="1000"
          loading="eager"
        >
      </div>
    {% endif %}
  </div>

  <!-- Floating Decor (Pure CSS/SVG Shapes) -->
  {% if section.settings.scatter_icons %}
    <div class="hero-comic__decor">
      <div class="decor-star" style="top: 10%; left: 10%;">★</div>
      <div class="decor-star" style="top: 20%; right: 15%; font-size: 3rem; transform: rotate(15deg);">★</div>
      <div class="decor-bolt" style="bottom: 15%; left: 5%;">⚡</div>
      <div class="decor-bolt" style="top: 15%; right: 5%; color: #fff;">⚡</div>
      <div class="decor-circle" style="top: 50%; left: 2%; background: #fff;"></div>
      <div class="decor-circle" style="bottom: 10%; right: 25%; background: var(--color-brand-pink);"></div>
    </div>
  {% endif %}

</div>

<style>
  .hero-comic-burst {
    position: relative;
    width: 100vw;
    margin-left: calc(50% - 50vw);
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    height: var(--desktop-height);
    background-color: var(--burst-right);
  }

  /* --- Backgrounds --- */
  .hero-comic__bg-left {
    position: absolute;
    inset: 0;
    width: 100%;
    z-index: 1;
    background-color: var(--burst-left);
    clip-path: polygon(0 0, 60% 0, 45% 40%, 55% 100%, 0 100%);
  }

  .hero-comic__bg-right {
    position: absolute;
    inset: 0;
    width: 100%;
    z-index: 0;
    background-color: var(--burst-right);
  }

  .hero-comic__pattern {
    position: absolute;
    inset: 0;
    z-index: 2;
    background-image: radial-gradient(rgba(0,0,0,0.15) 20%, transparent 20%);
    background-size: 20px 20px;
    pointer-events: none;
  }

  /* --- Blocks Content --- */
  .hero-comic__content-wrapper {
    position: relative;
    z-index: 10;
    width: 100%;
    max-width: 1400px;
    padding: 2rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
  }

  .hero-comic__blocks {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    width: 100%;
  }

  .hero-comic__block-item {
    width: 100%;
    display: flex;
    justify-content: center;
    position: relative;
  }

  /* --- Block Styles --- */
  .comic-3d-text {
    margin: 0;
    line-height: 0.9;
    transform: rotate(var(--rotation));
    color: var(--text-color);
    font-size: var(--font-size-desktop);
    -webkit-text-stroke: 3px var(--shadow-color);
    text-shadow: 
      4px 4px 0 var(--shadow-color),
      8px 8px 0 rgba(0,0,0,0.1);
    filter: drop-shadow(4px 4px 0px var(--shadow-color));
  }

  .comic-stroke-text {
    font-size: var(--font-size-desktop);
    color: var(--text-color);
    text-transform: uppercase;
    margin: 0;
    line-height: 1;
    -webkit-text-stroke: 2px var(--stroke-color);
    text-shadow: 4px 4px 0 var(--stroke-color);
    font-weight: 900;
  }

  .hero-comic__button {
    padding: 1.5rem 4rem;
    font-size: 2rem;
    text-decoration: none;
    text-transform: uppercase;
    display: inline-block;
    border: 3px solid var(--color-brand-black);
    cursor: pointer;
    box-shadow: 6px 6px 0 var(--color-brand-black);
    transition: transform 0.2s;
    z-index: 20;
    pointer-events: auto;
  }

  .hero-comic__button:hover {
    transform: translate(-3px, -3px);
    box-shadow: 9px 9px 0 var(--color-brand-black);
  }

  .hero-comic__sticker {
    width: var(--sticker-width-desktop);
    height: auto;
    max-width: 100%;
    display: block;
  }

  /* --- Image Overlay --- */
  .hero-comic__image-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 5;
    opacity: 0.8;
  }

  .hero-comic__image {
    width: 100%;
    height: auto;
    filter: drop-shadow(0 0 20px rgba(0,0,0,0.3));
  }

  /* --- Decor --- */
  .hero-comic__decor {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 3;
  }

  .decor-star {
    position: absolute;
    color: var(--color-brand-yellow);
    font-size: 3rem;
    -webkit-text-stroke: 2px black;
    animation: pulse 3s infinite ease-in-out;
    text-shadow: 2px 2px 0 black;
  }

  .decor-bolt {
    position: absolute;
    font-size: 4rem;
    color: black;
    transform: rotate(20deg);
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1) rotate(0deg); }
    50% { transform: scale(1.1) rotate(5deg); }
  }

  /* --- Mobile Layout --- */
  @media (max-width: 768px) {
    .hero-comic-burst {
      height: var(--mobile-height);
    }

    .hero-comic__bg-left {
      clip-path: polygon(0 0, 100% 0, 100% 45%, 0 55%, 0 100%);
    }

    .hero-comic__content-wrapper {
      padding: 1rem;
    }

    .hero-comic__blocks {
      gap: 1.5rem;
    }

    .comic-3d-text {
      font-size: var(--font-size-mobile);
      -webkit-text-stroke: 2px var(--shadow-color);
      text-shadow: 3px 3px 0 var(--shadow-color);
    }

    .comic-stroke-text {
      font-size: var(--font-size-mobile);
      -webkit-text-stroke: 1px var(--stroke-color);
    }

    .hero-comic__button {
      padding: 1.2rem 3rem;
      font-size: 1.5rem;
    }

    .hero-comic__sticker {
      width: var(--sticker-width-mobile);
    }

    .hero-comic__image-overlay {
      width: 80% !important;
      opacity: 0.5;
    }
  }
</style>
